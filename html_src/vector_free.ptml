<!DOCTYPE html>
<html>
    <head>
<!--include head.txt -->
        <title>
            17. Vector and Free Store
        </title>
<!--include googleAnalyticsScript.txt -->
    </head>

    <body>
        <div class="wrapper">
<!--include navbar.txt -->
            <div id="content">
                <h1>
                    17. Vector and Free Store
                </h1>

                <p class="leadquote">
                "Use <code>vector</code> as the default."
                -- Alex Stepanov
                </p>

                <details>
                    <summary class="sum1">
                    17.1 Introduction
                    </summary>
                    <figure>
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a6/Vector_components_and_base_change.svg/400px-Vector_components_and_base_change.svg.png"
                        width="20%">
                        <figcaption>
                        </figcaption>
                    </figure>

                    <p>
                        The most useful class in the standard C++ library is
                        <code>vector</code>.
                        We are going to undertake an adventure: we are going to
                        try to understand how <code>vector</code> was gradually
                        built to what we have today, why it was so designed,
                        and along the way we will gain some understanding of
                        how we might create our own container. We will also
                        gain an understanding of how computer programs work at
                        a deeper level than we have encountered before.
                    </p>

                    <p>
                        Why bother with all of these details? The reason is, if
                        we want to become true software professionals, we must
                        understand how our languages use the underlying
                        hardware!
                    </p>

                </details>

                <details>
                    <summary class="sum1">
                    17.2 vector basics
                    </summary>
                    <p>
                      <PRE>
                        <code>
vector&lt;double&gt; age(4); <span class="comment">// a vector with 4 elements of type double</span>
age[0]=0.33;
age[1]=22.0;
age[2]=27.2;
age[3]=54.2;
                        </code>
                      </PRE>
                      <br>
                      <figure>
                          <img src="graphics/Chap17Diag1.png" width="40%">
                      </figure>
                    </p>
                    <br>
                    <p>
                      Elements of <code>age</code> are numbered
                      <code>0</code> to <code>age.size()-1</code>.
                      <br>
                      Defining a fixed-size data structure,
                      <br>
                      <PRE>
                        <code>
class vector {
int size, age0, age1, age2, age3;
// . . .
};
                        </code>
                      </PRE>
                      <br>
                      <figure>
                          <img src="graphics/Chap17Diag2.png" width="40%">
                      </figure>
                    </p>
                    <br>
                    <p>
                      Adding an element with <code>push_back()</code> becomes
                      difficult as defined <code>vector</code> has fixed
                      number of elements.
                      <br>
                      We need a data member that points to the set of elements
                      so that it points to different set of elements
                      when more space is needed.
                      <br>
                      A <code>pointer</code> holds an address and is
                      distinguished by the suffix <code>*</code>
                      meaning "pointer to <code>double</code>".
                      <PRE>
                        <code>
<span class="comment">// a very simplified vector of doubles (like vector&lt;double&gt;)</span>
class vector {
int sz; <span class="comment">// the size</span>
double* elem; <span class="comment">// pointer to the first element (of type double)</span>
public:
vector(int s); <span class="comment">// constructor: allocate s doubles,</span>
<span class="comment">// let elem point to them</span>
<span class="comment">// store s in sz</span>
int size() const { return sz; } <span class="comment">// the current size</span>
};
                        </code>
                      </PRE>
                    </p>
                </details>

                <details>
                    <summary class="sum1">
                    17.3 Memory, addresses, and pointers
                    </summary>
                    <figure>
                        <img src="" width="40%">
                        <figcaption>
                        </figcaption>
                    </figure>
                    <p>
                    </p>
                    <details>
                        <summary class="sum2">
                        17.3.1 The size of operator
                        </summary>
                        <figure>
                            <img src="" width="40%">
                            <figcaption>
                            </figcaption>
                        </figure>
                        <p>
                        </p>
                    </details>

                </details>

                <details>
                    <summary class="sum1">
                    17.4 Free store and pointers
                    </summary>
                    <figure>
                        <img src="" width="40%">
                        <figcaption>
                        </figcaption>
                    </figure>
                    <p>
                    </p>
                    <details>
                        <summary class="sum2">
                        17.4.1 Free-store allocation
                        </summary>
                        <figure>
                            <img src="" width="40%">
                            <figcaption>
                            </figcaption>
                        </figure>
                        <p>
                        </p>
                    </details>

                    <details>
                        <summary class="sum2">
                        17.4.2 Access through pointers
                        </summary>
                        <figure>
                            <img src="" width="40%">
                            <figcaption>
                            </figcaption>
                        </figure>
                        <p>
                        </p>
                    </details>

                    <details>
                        <summary class="sum2">
                        17.4.3 Ranges
                        </summary>
                        <figure>
                            <img src="" width="40%">
                            <figcaption>
                            </figcaption>
                        </figure>
                        <p>
                        </p>
                    </details>

                    <details>
                        <summary class="sum2">
                        17.4.4 Initialization
                        </summary>
                        <figure>
                            <img src="" width="40%">
                            <figcaption>
                            </figcaption>
                        </figure>
                        <p>
                        </p>
                    </details>

                    <details>
                        <summary class="sum2">
                        17.4.5 The null pointer
                        </summary>
                        <figure>
                            <img src="" width="40%">
                            <figcaption>
                            </figcaption>
                        </figure>
                        <p>
                        </p>
                    </details>

                    <details>
                        <summary class="sum2">
                        17.4.6 Free-store deallocation
                        </summary>
                        <figure>
                            <img src="" width="40%">
                            <figcaption>
                            </figcaption>
                        </figure>
                        <p>
                        </p>
                    </details>

                </details>

                <details>
                    <summary class="sum1">
                    17.5 Destructors
                    </summary>
                    <figure>
                        <img src="" width="40%">
                        <figcaption>
                        </figcaption>
                    </figure>
                    <p>
                    </p>
                    <details>
                        <summary class="sum2">
                        17.5.1 Generated destructors
                        </summary>
                        <figure>
                            <img src="" width="40%">
                            <figcaption>
                            </figcaption>
                        </figure>
                        <p>
                        </p>
                    </details>

                    <details>
                        <summary class="sum2">
                        17.5.2 Destructors and free store
                        </summary>
                        <figure>
                            <img src="" width="40%">
                            <figcaption>
                            </figcaption>
                        </figure>
                        <p>
                        </p>
                    </details>

                </details>

                <details>
                    <summary class="sum1">
                    17.6 Access to elements
                    </summary>
                    <figure>
                        <img src="" width="40%">
                        <figcaption>
                        </figcaption>
                    </figure>
                    <p>
                    </p>
                </details>

                <details>
                    <summary class="sum1">
                    17.7 Pointers to class objects
                    </summary>
                    <figure>
                        <img src="" width="40%">
                        <figcaption>
                        </figcaption>
                    </figure>
                    <p>
                    </p>
                </details>

                <details>
                    <summary class="sum1">
                    17.8 Messing with types: void* and casts
                    </summary>
                    <figure>
                        <img src="" width="40%">
                        <figcaption>
                        </figcaption>
                    </figure>
                    <p>
                    </p>
                </details>

                <details>
                    <summary class="sum1">
                    17.9 Pointers and references
                    </summary>
                    <figure>
                        <img src="" width="40%">
                        <figcaption>
                        </figcaption>
                    </figure>
                    <p>
                    </p>
                    <details>
                        <summary class="sum2">
                        17.9.1 Pointer and reference parameters
                        </summary>
                        <figure>
                            <img src="" width="40%">
                            <figcaption>
                            </figcaption>
                        </figure>
                        <p>
                        </p>
                    </details>

                    <details>
                        <summary class="sum2">
                        17.9.2 Pointers, references, and inheritance
                        </summary>
                        <figure>
                            <img src="" width="40%">
                            <figcaption>
                            </figcaption>
                        </figure>
                        <p>
                        </p>
                    </details>

                    <details>
                        <summary class="sum2">
                        17.9.3 An example: lists
                        </summary>
                        <figure>
                            <img src="" width="40%">
                            <figcaption>
                            </figcaption>
                        </figure>
                        <p>
                        </p>
                    </details>

                    <details>
                        <summary class="sum2">
                        17.9.4 List operations
                        </summary>
                        <figure>
                            <img src="" width="40%">
                            <figcaption>
                            </figcaption>
                        </figure>
                        <p>
                        </p>
                    </details>

                    <details>
                        <summary class="sum2">
                        17.9.5 List use
                        </summary>
                        <figure>
                            <img src="" width="40%">
                            <figcaption>
                            </figcaption>
                        </figure>
                        <p>
                        </p>
                    </details>

                </details>

                <details>
                    <summary class="sum1">
                    17.10 The this pointer
                    </summary>
                    <figure>
                        <img src="" width="40%">
                        <figcaption>
                        </figcaption>
                    </figure>
                    <p>
                    </p>
                    <details>
                        <summary class="sum2">
                        17.10.1 More link use
                        </summary>
                        <figure>
                            <img src="" width="40%">
                            <figcaption>
                            </figcaption>
                        </figure>
                        <p>
                        </p>
                    </details>

                </details>


                <details>
                    <summary class="sum1">
                    Test Yourself!
                    </summary>
                    <figure>
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/2e/Exams_in_Jaura%2C_India.jpg/560px-Exams_in_Jaura%2C_India.jpg"
                        width="20%">
                        <figcaption>
                        </figcaption>
                    </figure>
<!-- Include the test material here! -->
                </details>


                <details>
                    <summary class="sum1">
                    Drill
                    </summary>
                    <figure>
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/7b/Queens.guard.buck.palace.arp.jpg/600px-Queens.guard.buck.palace.arp.jpg"
                        width="20%">
                        <figcaption>
                        </figcaption>
                    </figure>

                    <ol>
                    </ol>
                </details>

            </div>
        </div>

    </body>
</html>
