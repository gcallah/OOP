<!DOCTYPE html>
<html>
<!-- THIS FILE WAS GENERATED BY A SCRIPT: DO NOT EDIT IT! -->
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <link rel="stylesheet" href="style.css">

        <!-- jQuery CDN -->
         <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
         <!-- Bootstrap Js CDN -->
         <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

         <script type="text/javascript">
             var status = 'on';
             $(document).ready(function () {
                 $('#sidebarCollapse').on('click', function () {
                     $('#sidebar').toggleClass('active');
                     if (status == 'on') {
                         $('#sidebarText').text("Expand Side Nav");
                         status = 'off';
                     } else {
                         $('#sidebarText').text("Collapse Side Nav");
                         status = 'on';
                     }
                 });
             });
         </script>
        <title>
            18. Vectors and Arrays
        </title>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-114841175-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-114841175-1');
</script>
    </head>

    <body>
        <div class="wrapper">
<!-- Sidebar Holder -->
<nav id="sidebar">
        <div id="sidebarCollapse">
        <div class="sidebar-header">
            <h1>
            Object-Oriented Programming
            </h1>
            <strong>OOP</strong>
        </div>
    </div>
    <ul class="list-unstyled components">
        <li>
        <a href="index.html">
        <i class="glyphicon glyphicon-home"></i>
        Home
        </a>
        </li>
        <li>
        <a href="#Submenu0" data-toggle="collapse" aria-expanded="false">
        <i class="glyphicon glyphicon-list"></i>
        Topics
        </a>
        </li>
        <ul class="collapse list-unstyled" id="Submenu0">
            <li>
            <a href="#Submenu1" data-toggle="collapse" aria-expanded="false">
            Part I: The Basics
            </a>
            </li>
            <ul class="collapse list-unstyled" id="Submenu1">
                <li>
                <a href="hello.html">
                2. Hello, World!
                </a>
                </li>
                <li>
                <a href="otv.html">
                3. Objects, Types, and Values
                </a>
                </li>
                <li>
                <a href="computation.html">
                4. Computation
                </a>
                </li>
                <li>
                <a href="errors.html">
                5. Errors
                </a>
                </li>
                <li>
                <a href="writing.html">
                6. Writing a Program
                </a>
                </li>
                <li>
                <a href="completing.html">
                7. Completing a Program
                </a>
                </li>
                <li>
                <a href="functions.html">
                8. Technicalities: Functions, etc.
                </a>
                </li>
                <li>
                <a href="classes.html">
                9. Technicalities: Classes, etc.
                </a>
                </li>
            </ul>
            <li>
            <a href="#Submenu2" data-toggle="collapse" aria-expanded="false">
            Part II: Input and Output
            </a>
            </li>
            <ul class="collapse list-unstyled" id="Submenu2">
                <li>
                <a href="iostreams.html">
                10. Input and Output Streams
                </a>
                </li>
                <li>
                <a href="customizingio.html">
                11. Customizing Input and Output
                </a>
                </li>
                <li>
                <a href="display_model.html">
                12. A Display Model
                </a>
                </li>
                <li>
                <a href="graphics_classes.html">
                13. Graphics Classes
                </a>
                </li>
                <li>
                <a href="class_design.html">
                14. Graphics Class Design
                </a>
                </li>
                <li>
                <a href="graphing_funcs.html">
                15. Graphing Functions and Data
                </a>
                </li>
                <li>
                <a href="gui.html">
                16. Graphical User Interfaces
                </a>
                </li>
            </ul>
            <li>
            <a href="#Submenu3" data-toggle="collapse" aria-expanded="false">
            Part III: Data and Algorithms
            </a>
            </li>
            <ul class="collapse list-unstyled" id="Submenu3">
                <li>
                <a href="vector_free.html">
                17. Vector and Free Store
                </a>
                </li>
                <li>
                <a href="vector_array.html">
                18. Vectors and Arrays
                </a>
                </li>
                <li>
                <a href="vector_templ.html">
                19. Vector, Templates, and Exceptions
                </a>
                </li>
                <li>
                <a href="containers.html">
                20. Containers and Iterators
                </a>
                </li>
                <li>
                <a href="algorithms.html">
                21. Algorithms and Maps
                </a>
                </li>
            </ul>
            <li>
            <a href="#Submenu4" data-toggle="collapse" aria-expanded="false">
            Part IV Broadening the View
            </a>
            </li>
            <ul class="collapse list-unstyled" id="Submenu4">
                <li>
                <a href="history.html">
                22. Ideals and History
                </a>
                </li>
                <li>
                <a href="text.html">
                23. Text Manipulation
                </a>
                </li>
                <li>
                <a href="numerics.html">
                24. Numerics
                </a>
                </li>
                <li>
                <a href="embedded.html">
                25. Embedded Systems Programming
                </a>
                </li>
                <li>
                <a href="testing.html">
                26. Testing
                </a>
                </li>
                <li>
                <a href="C.html">
                27. The C Programming Language
                </a>
                </li>
            </ul>
        </ul>
        <li>
        <a href="#Submenu5" data-toggle="collapse" aria-expanded="false">
        <i class="glyphicon glyphicon-blackboard"></i>
        Other Materials
        </a>
        </li>
        <ul class="collapse list-unstyled" id="Submenu5">
            <li>
            <a href="syllabi/SyllabusSu2018.html">
            <i class="glyphicon glyphicon-tasks"></i>
            Course Syllabus
            </a>
            </li>
            <li>
            <a href="https://github.com/gcallah/OOP/tree/03c8d77c5ee5faae253d8a8e989aa347af0c3c45/code">
            <i class="glyphicon glyphicon-list-alt"></i>
            Source Code
            </a>
            </li>
            <li>
            <a href="tests/midterm_key.html">
            <i class="glyphicon glyphicon-pencil"></i>
            Midterm
            </a>
            </li>
            <li>
            <a href="http://www.stroustrup.com/programming.html">
            <i class="glyphicon glyphicon-book"></i>
            Our textbook's website
            </a>
            </li>
            <li>
            <a href="C++tips.html">
            <i class="glyphicon glyphicon-hand-right"></i>
            C++ Tips
            </a>
            </li>
            <li>
            <a href="https://gcallah.github.io/utils/unix_guide.html">
            <i class="glyphicon glyphicon-hand-right"></i>
            Guide to UNIX
            </a>
            </li>
        </ul>
        <li>
        <a href="about.html">
        <i class="glyphicon glyphicon-info-sign"></i>
        About
        </a>
        </li>
    </ul>
</nav>
            <div id="content">
                <h1>
                    18. Vectors and Arrays
                </h1>

                <p class="leadquote">
                    "Caveat emptor!" -- Ancient advice
                </p>

                <details>
                    <summary class="sum1">
                    18.1 Introduction
                    </summary>
                    <figure>
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c2/Arraymbiraplayed.jpg/600px-Arraymbiraplayed.jpg"
                        width="24%">
                        <figcaption>
                        </figcaption>
                    </figure>

                    <p>
                        We are looking at how to go from the hardware supported
                        types "upward" to types that act the way users, not
                        hardware, want.
                    </p>

                    <p>
                        In this chapter we focus on copying, and how it relates
                        to initialization, cleanup, equality testing, etc.
                    </p>

                </details>

                <details>
                    <summary class="sum1">
                    18.2 Initialization
                    </summary>
                    <figure>
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/4a/Depart4x100.jpg/400px-Depart4x100.jpg"
                        width="26%">
                        <figcaption>
                        </figcaption>
                    </figure>

                    <p>
                        We usually should initialize our variables rather than
                        accepting the default value. Initializer lists are in
                        curly braces: <code>{}</code>.
                        We can write:
                    </p>

                    <p>
                    <code>
                        <pre>
vector v = {1, 2, 3];
                        </pre>
                    </code>
                    </p>

                    <p>
                     Or:
                    </p>

                    <p>
                    <code>
                        <pre>
vector v = {1, 2, 3];
                        </pre>
                    </code>
                    </p>

                </details>

                <details>
                    <summary class="sum1">
                    18.3 Copying
                    </summary>
                    <figure>
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/ef/Fuji_Xerox_Document_Centre_505_and_Taiwan_Xerox_Walk-In_120D_at_ROC_National_Central_Library_20101211.jpg/440px-Fuji_Xerox_Document_Centre_505_and_Taiwan_Xerox_Walk-In_120D_at_ROC_National_Central_Library_20101211.jpg"
                        width="20%">
                        <figcaption>
                        </figcaption>
                    </figure>
                    <p>
                        Consider an implementation of <code>vector</code>
                        like the following:
                    </p>

                    <p>
                    <code>
                        <pre>
class vect {
    int sz;
    double* elem;
public:
    vect(int s)
        :sz{s}, elem{new double [s]}  { /*  */ }
    ~vect()
        { delete[] elem; }
    double get(int i) { return elem[i]; }
    void set(int i, double d) { elem[i] = d; }
};
                        </pre>
                    </code>
                    </p>

                    <p>
                        Then what happens in the following code?
                    </p>

                    <p>
                    <code>
                        <pre>
void f(int n)
{
    vect v(3);
    v.set(2, 2.2);
    vect v2 = v;
    v.set(1, 9.9);
    v2.set(0, 8.8);
    cout &lt;&lt; v[0] &lt;&lt; ' ' &lt;&lt; v2[1];
}
                        </pre>
                    </code>
                    </p>

                    <p>
                        Disaster!
                    </p>

                    <details>
                        <summary class="sum2">
                        18.3.1 Copy constructors
                        </summary>
                        <figure>
                            <img src="" width="40%">
                            <figcaption>
                            </figcaption>
                        </figure>

                        <p>
                            What to do? Create a <span class="hilight">copy
                            constructor</span>.
                        </p>

                        <p>
                        <code>
                            <pre>
vector::vector(const vector&amp; arg)
// allocate space, then initialize via copy
    :sz{arg.sz}, elem{new double[arg.sz]}
{
    copy(arg.elem, arg.elem+arg.sz, elem);  // from std lib
}
                            </pre>
                        </code>
                        </p>


                    </details>
                    <details>
                        <summary class="sum2">
                        18.3.2 Copy assignments
                        </summary>
                        <figure>
                            <img src="" width="40%">
                            <figcaption>
                            </figcaption>
                        </figure>

                        <p>
                            We get the same problem as above, <i>plus</i>
                            a memory leak, on default assignments.
                            Here's what we need to do:
                        </p>

                        <p>
                        <code>
                            <pre>
vector&amp; vector::operator=(const vector&amp; a)
// make this vector a copy of a
{
    double* p = new double[a.sz];
    copy(a.elem, a.elem+a.sz, p);
    delete[] elem;
    elem = p;
    sz = a.sz;
    return *this;  // return self-ref
}
                            </pre>
                        </code>
                        </p>

                    </details>
                    <details>
                        <summary class="sum2">
                        18.3.3 Copy terminology
                        </summary>
                        <figure>
                            <img src="" width="40%">
                            <figcaption>
                            </figcaption>
                        </figure>

                        <p>
                            Let's look at 
                            <span class="hilight">shallow copies</span>
                            versus
                            <span class="hilight">deep copies</span>.
                        </p>

                        <p>
                            In a <span class="hilight">shallow copy</span>
                            both variables point to the same memory.
                        </p>

                        <p>
                            In a <span class="hilight">deep copy</span>
                            each variable points to different memory.
                        </p>

                    </details>
                    <details>
                        <summary class="sum2">
                        18.3.4 Moving
                        </summary>
                        <figure>
                            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/66/The_Movings_by_Louis-Léopold_Boilly.jpg/500px-The_Movings_by_Louis-Léopold_Boilly.jpg"
                            width="24%">
                            <figcaption>
                            </figcaption>
                        </figure>

                        <p>
                            We can write a <i>move</i> assignment operator
                            when we want to explicitly re-use the storage
                            for one object in another.
                            It looks like this:
                        </p>

                        <p>
                        <code>
                            <pre>
vector&amp; vector::operator=(vector&amp;&amp; a)
                            </pre>
                        </code>
                        </p>

                        <p>
                            The compiler will call this automatically when
                            it sees an assigned element is going out of scope.
                        </p>

                    </details>
                </details>

                <details>
                    <summary class="sum1">
                        Drill
                    </summary>

                    <p>
                        <code>vec1.cpp:</code>
                        <br>
                        Write a vector class with the default
                        copy constructor and assignment operator.
                        write a main with a function like
                        <code>f()</code> above. Loop calling it and see
                        what happens.
                    </p>

                    <p>
                        <code>vec2.cpp:</code>
                        <br>
                        Copy that code and add proper copy constructor and 
                        assignment operator. Run your loop again.
                        Things should work now.
                    </p>

                </details>


                <details>
                    <summary class="sum1">
                    18.4 Essential operations
                    </summary>
                    <figure>
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/66/B_vitamin_supplement_tablets.jpg/560px-B_vitamin_supplement_tablets.jpg"
                            width="30%">
                        <figcaption>
                        </figcaption>
                    </figure>
                    <p>
                        The C++ FDA recomments the following "7 essential
                        operations" for a class:
                    </p>

                    <ul>
                        <li>
                            Constructor with args
                        </li>

                        <li>
                            Default constructor
                        </li>

                        <li>
                            Copy constructor
                        </li>

                        <li>
                            Copy assignment
                        </li>

                        <li>
                            Move constructor
                        </li>

                        <li>
                            Move assignment
                        </li>

                        <li>
                            Destructor
                        </li>

                    </ul>

                    <details>
                        <summary class="sum2">
                        18.4.1 Explicit constructors
                        </summary>
                        <figure>
                            <img src="" width="40%">
                            <figcaption>
                            </figcaption>
                        </figure>

                        <p>
                            The keyword <code>explicit</code> prevents
                            default type conversions for objects when
                            we don't want them. Good example:
                        </p>

                        <p>
                        <code>
                            <pre>
class complex {
    public:
        complex(double); // construct a complex # from a double
};

complex z = 3.14;  // OK!
                            </pre>
                        </code>
                        </p>

                        <p>
                            Bad example:
                        </p>

                        <p>
                        <code>
                            <pre>
vector v = 10;
v = 20;  // this would assign a new vector of 20 doubles to v!
                            </pre>
                        </code>
                        </p>


                    </details>
                    <details>
                        <summary class="sum2">
                        18.4.2 Debugging constructors and destructors
                        </summary>
                        <figure>
                            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/74/Insect_collage.png/440px-Insect_collage.png"
                            width="20%">
                            <figcaption>
                            </figcaption>
                        </figure>

                        <p>
                            These are not called just where you see them!
                            Rule:
                        </p>

                        <ul>
                            <li>
                                Whenever an object of type <code>X</code> 
                                is created, one of <code>X</code>'s
                                constructors is invoked.
                            </li>

                            <li>
                                Whenever an object of type <code>X</code> 
                                is destroyed, <code>X</code>'s
                                destructor is invoked.
                            </li>
                        </ul>

                    </details>
                </details>

                <details>
                    <summary class="sum1">
                        Drill
                    </summary>

                    <p>
                        Do the exercise on pages 644-645 of the textbook.
                    </p>

                </details>

                <details>
                    <summary class="sum1">
                    18.5 Access to vector elements
                    </summary>
                    <figure>
                        <img src="" width="40%">
                        <figcaption>
                        </figcaption>
                    </figure>
                    <details>
                        <summary class="sum2">
                        18.5.1 Overloading on const
                        </summary>
                        <figure>
                            <img src="" width="40%">
                            <figcaption>
                            </figcaption>
                        </figure>
                        <p>
                        </p>
                    </details>
                </details>
                <details>
                    <summary class="sum1">
                    18.6 Arrays
                    </summary>
                    <figure>
                        <img src="" width="40%">
                        <figcaption>
                        </figcaption>
                    </figure>
                    <p>
                    </p>
                    <details>
                        <summary class="sum2">
                        18.6.1 Pointers to array elements
                        </summary>
                        <figure>
                            <img src="" width="40%">
                            <figcaption>
                            </figcaption>
                        </figure>
                        <p>
                        </p>
                    </details>
                    <details>
                        <summary class="sum2">
                        18.6.2 Pointers and arrays
                        </summary>
                        <figure>
                            <img src="" width="40%">
                            <figcaption>
                            </figcaption>
                        </figure>
                        <p>
                        </p>
                    </details>
                    <details>
                        <summary class="sum2">
                        18.6.3 Array initialization
                        </summary>
                        <figure>
                            <img src="" width="40%">
                            <figcaption>
                            </figcaption>
                        </figure>
                        <p>
                        </p>
                    </details>
                    <details>
                        <summary class="sum2">
                        18.6.4 Pointer problems
                        </summary>
                        <figure>
                            <img src="" width="40%">
                            <figcaption>
                            </figcaption>
                        </figure>
                        <p>
                        </p>
                    </details>
                </details>
                <details>
                    <summary class="sum1">
                    18.7 Examples: palindrome
                    </summary>
                    <figure>
                        <img src="" width="40%">
                        <figcaption>
                        </figcaption>
                    </figure>
                    <p>
                    </p>
                    <details>
                        <summary class="sum2">
                        18.7.1 Palindromes using string
                        </summary>
                        <figure>
                            <img src="" width="40%">
                            <figcaption>
                            </figcaption>
                        </figure>
                        <p>
                        </p>
                    </details>
                    <details>
                        <summary class="sum2">
                        18.7.2 Palindromes using arrays
                        </summary>
                        <figure>
                            <img src="" width="40%">
                            <figcaption>
                            </figcaption>
                        </figure>
                        <p>
                        </p>
                    </details>
                    <details>
                        <summary class="sum2">
                        18.7.3 Palindromes using pointers
                        </summary>
                        <figure>
                            <img src="" width="40%">
                            <figcaption>
                            </figcaption>
                        </figure>
                        <p>
                        </p>
                    </details>
                </details>

                <details>
                    <summary class="sum1">
                    Test Yourself!
                    </summary>
                    <figure>
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/2e/Exams_in_Jaura%2C_India.jpg/560px-Exams_in_Jaura%2C_India.jpg"
                        width="20%">
                        <figcaption>
                        </figcaption>
                    </figure>
        <ol class="nested">
            <li>
                A good use of shallow copying would be when
            </li>
            <ol type="a" class="nested">
                <li>
                <input type="radio" name="q1" value="a">
                we have a very large object to copy
                </li>
                <li>
                <input type="radio" name="q1" value="b">
                we just need to scoop out the top few values from an object
                </li>
                <li>
                <input type="radio" name="q1" value="c">
                we don't really care if all the field values are the same
                </li>
            </ol>
            <li>
                A good use of deep copying would be when
            </li>
            <ol type="a" class="nested">
                <li>
                <input type="radio" name="q2" value="a">
                we need to make sure the values in one object change when values in the other do
                </li>
                <li>
                <input type="radio" name="q2" value="b">
                we need to make sure each objects uses separate memory
                </li>
                <li>
                <input type="radio" name="q2" value="c">
                we need to save memory
                </li>
            </ol>
            <li>
                We want a default constructor when
            </li>
            <ol type="a" class="nested">
                <li>
                <input type="radio" name="q3" value="a">
                we can establish meaningful invariants using default values
                </li>
                <li>
                <input type="radio" name="q3" value="b">
                we really don't know what should initialize a class
                </li>
                <li>
                <input type="radio" name="q3" value="c">
                we want to eliminate the faults (defaults) from our classes
                </li>
            </ol>
            <li>
                We need a destructor when our class
            </li>
            <ol type="a" class="nested">
                <li>
                <input type="radio" name="q4" value="a">
                has many members
                </li>
                <li>
                <input type="radio" name="q4" value="b">
                has default values
                </li>
                <li>
                <input type="radio" name="q4" value="c">
                has no copy constructor
                </li>
                <li>
                <input type="radio" name="q4" value="d">
                acquires resources
                </li>
            </ol>
        </ol>
        <details>
            <summary class="sum3">
                Answers
            </summary>
            <p>
                1. a; 2. b; 3. a; 4. d; 
            </p>
        </details>
                </details>

                <details>
                    <summary class="sum1">
                    Drill
                    </summary>
                    <figure>
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/7b/Queens.guard.buck.palace.arp.jpg/600px-Queens.guard.buck.palace.arp.jpg"
                        width="20%">
                        <figcaption>
                        </figcaption>
                    </figure>

                    <ol>
                    </ol>
                </details>
            </div>
        </div>

    </body>
</html>
